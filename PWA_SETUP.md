# PWA Setup Guide

This application has been configured as a Progressive Web App (PWA), allowing users to install it on their phones and use it like a native app.

## What's Been Implemented

### 1. PWA Configuration
- **Manifest File**: `/public/manifest.json` - Defines app metadata, icons, and behavior
- **Service Worker**: Automatically generated by `next-pwa` package
- **Meta Tags**: Added to `/app/layout.tsx` for Apple devices and PWA capabilities

### 2. Features Enabled
- ✅ Install to home screen (Android & iOS)
- ✅ Offline support with caching strategies
- ✅ App-like experience (standalone mode)
- ✅ Splash screen support
- ✅ Theme color customization (#F97316 - Orange)
- ✅ App shortcuts for Browse Cars and My Bookings

### 3. Caching Strategy
The app implements intelligent caching:
- **Google Fonts**: Cache-first (365 days)
- **Static Assets** (images, CSS, JS): Stale-while-revalidate (24 hours)
- **API Calls**: Network-first with fallback (24 hours)

## Installation Instructions for Users

### Android (Chrome/Edge)
1. Open the website in Chrome or Edge
2. Tap the menu (three dots)
3. Select "Add to Home screen" or "Install app"
4. Follow the prompts

### iOS (Safari)
1. Open the website in Safari
2. Tap the Share button (square with arrow)
3. Scroll down and tap "Add to Home Screen"
4. Name the app and tap "Add"

## Testing the PWA

### Chrome DevTools
1. Open Chrome DevTools (F12)
2. Go to Application tab
3. Check:
   - Manifest: Should show Drively app info
   - Service Workers: Should show active worker
   - Storage: Should show cached assets

### Lighthouse
1. Open Chrome DevTools
2. Go to Lighthouse tab
3. Select "Progressive Web App" category
4. Run audit

### Mobile Testing
1. Deploy to a production URL (must be HTTPS)
2. Open on mobile device
3. Look for install prompt or "Add to Home Screen" option

## Important Notes

### Icons
Current icons are placeholders based on the favicon. For optimal results:
- Replace icons in `/public/icons/` with properly sized versions
- Use square aspect ratio
- Consider using maskable icons for Android
- See `/public/icons/README.md` for more details

### Build Configuration
The app uses webpack mode for building (required by next-pwa):
```bash
npm run build  # Uses --webpack flag
```

### Service Worker Files
Service worker files are auto-generated and git-ignored:
- `/public/sw.js`
- `/public/workbox-*.js`
- `/public/worker-*.js`

### Production Deployment
PWA features require HTTPS. When deploying:
- Vercel/Netlify: HTTPS is automatic
- Custom server: Ensure SSL certificate is configured
- Local testing: Use `localhost` (treated as secure context)

## Customization

### Update Theme Color
Edit `/public/manifest.json` and `/app/layout.tsx`:
```json
"theme_color": "#F97316"
```

### Add More Shortcuts
Edit `/public/manifest.json` shortcuts array:
```json
{
  "name": "Your Feature",
  "url": "/your-route",
  "icons": [...]
}
```

### Adjust Caching
Edit `/next.config.ts` runtimeCaching array to modify caching strategies.

## Troubleshooting

### Install Button Not Showing
- Ensure app is served over HTTPS
- Check browser supports PWA (Chrome, Edge, Safari 11.1+)
- Verify manifest.json is loading correctly

### Service Worker Not Registering
- Check browser console for errors
- Verify service worker file exists at `/sw.js`
- Clear browser cache and reload

### Icons Not Displaying
- Generate proper icon sizes (see `/public/icons/README.md`)
- Clear app data and reinstall

## Resources
- [Next PWA Documentation](https://github.com/shadowwalker/next-pwa)
- [PWA Builder](https://www.pwabuilder.com/)
- [Web.dev PWA Guide](https://web.dev/progressive-web-apps/)
